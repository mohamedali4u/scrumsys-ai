# CORS configuration for AI Widget
add_header Access-Control-Allow-Origin "*" always;
add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always;
add_header Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With" always;
add_header Access-Control-Max-Age "86400" always;

# Handle preflight requests
if ($request_method = 'OPTIONS') {
    return 204;
}